{
    "sourceFile": "Controllers/OgrenciController.cs",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1762443540537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762443828141,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,111 @@\n+using Microsoft.AspNetCore.Mvc;\n+using Microsoft.EntityFrameworkCore;\n+using OgrenciYonetimProjesi.Data;\n+using OgrenciYonetimProjesi.Models;\n+\n+namespace OgrenciYonetimProjesi.Controllers\n+{\n+    public class OgrenciController : Controller\n+    {\n+        private readonly UygulamaDbContext _context;\n+\n+        public OgrenciController(UygulamaDbContext context)\n+        {\n+            _context = context;\n+        }\n+\n+        // ****************************************************\n+        // R - Read: Tüm Öğrencileri Listeleme (IActionResult)\n+        // ****************************************************\n+        public async Task<IActionResult> Index()\n+        {\n+            return View(await _context.Ogrenciler.ToListAsync());\n+        }\n+\n+        // ****************************************************\n+        // C - Create (GET): Formu Göster (IActionResult)\n+        // ****************************************************\n+        public IActionResult Ekle()\n+        {\n+            return View(); \n+        }\n+\n+        // ****************************************************\n+        // C - Create (POST): Veriyi Kaydet (IActionResult)\n+        // ****************************************************\n+        [HttpPost]\n+        [ValidateAntiForgeryToken]\n+        public async Task<IActionResult> Ekle([Bind(\"Ad,Soyad,OgrenciNo\")] Ogrenci ogrenci)\n+        {\n+            if (ModelState.IsValid)\n+            {\n+                _context.Add(ogrenci);\n+                await _context.SaveChangesAsync();\n+                return RedirectToAction(nameof(Index));\n+            }\n+            return View(ogrenci);\n+        }\n+\n+        // Eksik olan U ve D metotları buraya eklenecektir.\n+\n+        // ****************************************************\n+// U - Update (GET): Düzenleme Formunu Göster (IActionResult)\n+// ****************************************************\n+public async Task<IActionResult> Duzenle(int? id)\n+{\n+    if (id == null)\n+    {\n+        return NotFound(); // ID gelmezse 404 hatası döndür\n+    }\n+\n+    // ID'ye göre öğrenciyi veritabanından bul\n+    var ogrenci = await _context.Ogrenciler.FindAsync(id);\n+    \n+    if (ogrenci == null)\n+    {\n+        return NotFound(); // Öğrenci bulunamazsa 404 hatası döndür\n+    }\n+    \n+    // Bulunan öğrenci verisiyle View'ı göster\n+    return View(ogrenci);\n+}\n+\n+// ****************************************************\n+// U - Update (POST): Güncel Veriyi Kaydet (IActionResult)\n+// ****************************************************\n+[HttpPost]\n+[ValidateAntiForgeryToken]\n+public async Task<IActionResult> Duzenle(int id, [Bind(\"Id,Ad,Soyad,OgrenciNo\")] Ogrenci ogrenci)\n+{\n+    // URL'deki ID ile formdan gelen ID uyuşmalı\n+    if (id != ogrenci.Id)\n+    {\n+        return NotFound();\n+    }\n+\n+    if (ModelState.IsValid)\n+    {\n+        try\n+        {\n+            _context.Update(ogrenci); // Bağlamda güncelleme işaretini koy\n+            await _context.SaveChangesAsync(); // Veritabanına kaydet\n+        }\n+        catch (DbUpdateConcurrencyException)\n+        {\n+            // Güncelleme sırasında eşzamanlılık (concurrency) hatası olursa\n+            if (!_context.Ogrenciler.Any(e => e.Id == ogrenci.Id))\n+            {\n+                return NotFound();\n+            }\n+            else\n+            {\n+                throw;\n+            }\n+        }\n+        return RedirectToAction(nameof(Index)); // Başarılıysa Listeleme sayfasına yönlendir\n+    }\n+    return View(ogrenci); // Hata varsa formu tekrar göster\n+}\n+        \n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1762443862004,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n         // C - Create (GET): Formu Göster (IActionResult)\n         // ****************************************************\n         public IActionResult Ekle()\n         {\n-            return View(); \n+            return View();\n         }\n \n         // ****************************************************\n         // C - Create (POST): Veriyi Kaydet (IActionResult)\n@@ -48,116 +48,107 @@\n \n         // Eksik olan U ve D metotları buraya eklenecektir.\n \n         // ****************************************************\n-// U - Update (GET): Düzenleme Formunu Göster (IActionResult)\n-// ****************************************************\n-public async Task<IActionResult> Duzenle(int? id)\n-{\n-    if (id == null)\n-    {\n-        return NotFound(); // ID gelmezse 404 hatası döndür\n-    }\n+        // U - Update (GET): Düzenleme Formunu Göster (IActionResult)\n+        // ****************************************************\n+        public async Task<IActionResult> Duzenle(int? id)\n+        {\n+            if (id == null)\n+            {\n+                return NotFound(); // ID gelmezse 404 hatası döndür\n+            }\n \n-    // ID'ye göre öğrenciyi veritabanından bul\n-    var ogrenci = await _context.Ogrenciler.FindAsync(id);\n-    \n-    if (ogrenci == null)\n-    {\n-        return NotFound(); // Öğrenci bulunamazsa 404 hatası döndür\n-    }\n-    \n-    // Bulunan öğrenci verisiyle View'ı göster\n-    return View(ogrenci);\n-}\n+            // ID'ye göre öğrenciyi veritabanından bul\n+            var ogrenci = await _context.Ogrenciler.FindAsync(id);\n \n-// ****************************************************\n-// U - Update (POST): Güncel Veriyi Kaydet (IActionResult)\n-// ****************************************************\n-[HttpPost]\n-[ValidateAntiForgeryToken]\n-public async Task<IActionResult> Duzenle(int id, [Bind(\"Id,Ad,Soyad,OgrenciNo\")] Ogrenci ogrenci)\n-{\n-    // URL'deki ID ile formdan gelen ID uyuşmalı\n-    if (id != ogrenci.Id)\n-    {\n-        return NotFound();\n-    }\n+            if (ogrenci == null)\n+            {\n+                return NotFound(); // Öğrenci bulunamazsa 404 hatası döndür\n+            }\n \n-    if (ModelState.IsValid)\n-    {\n-        try\n-        {\n-            _context.Update(ogrenci); // Bağlamda güncelleme işaretini koy\n-            await _context.SaveChangesAsync(); // Veritabanına kaydet\n+            // Bulunan öğrenci verisiyle View'ı göster\n+            return View(ogrenci);\n         }\n-        catch (DbUpdateConcurrencyException)\n+\n+        // ****************************************************\n+        // U - Update (POST): Güncel Veriyi Kaydet (IActionResult)\n+        // ****************************************************\n+        [HttpPost]\n+        [ValidateAntiForgeryToken]\n+        public async Task<IActionResult> Duzenle(int id, [Bind(\"Id,Ad,Soyad,OgrenciNo\")] Ogrenci ogrenci)\n         {\n-            // Güncelleme sırasında eşzamanlılık (concurrency) hatası olursa\n-            if (!_context.Ogrenciler.Any(e => e.Id == ogrenci.Id))\n+            // URL'deki ID ile formdan gelen ID uyuşmalı\n+            if (id != ogrenci.Id)\n             {\n                 return NotFound();\n             }\n-            else\n+\n+            if (ModelState.IsValid)\n             {\n-                throw;\n+                try\n+                {\n+                    _context.Update(ogrenci); // Bağlamda güncelleme işaretini koy\n+                    await _context.SaveChangesAsync(); // Veritabanına kaydet\n+                }\n+                catch (DbUpdateConcurrencyException)\n+                {\n+                    // Güncelleme sırasında eşzamanlılık (concurrency) hatası olursa\n+                    if (!_context.Ogrenciler.Any(e => e.Id == ogrenci.Id))\n+                    {\n+                        return NotFound();\n+                    }\n+                    else\n+                    {\n+                        throw;\n+                    }\n+                }\n+                return RedirectToAction(nameof(Index)); // Başarılıysa Listeleme sayfasına yönlendir\n             }\n+            return View(ogrenci); // Hata varsa formu tekrar göster\n         }\n-        return RedirectToAction(nameof(Index)); // Başarılıysa Listeleme sayfasına yönlendir\n-    }\n-    return View(ogrenci); // Hata varsa formu tekrar göster\n-}\n-        \n-    }\n-}\n-using Microsoft.AspNetCore.Mvc;\n-using Microsoft.EntityFrameworkCore;\n-using OgrenciYonetimProjesi.Data;\n-using OgrenciYonetimProjesi.Models;\n \n-namespace OgrenciYonetimProjesi.Controllers\n-{\n-    public class OgrenciController : Controller\n-    {\n-        private readonly UygulamaDbContext _context;\n+        // Controllers/OgrenciController.cs (OgrenciController sınıfının içine)\n \n-        public OgrenciController(UygulamaDbContext context)\n-        {\n-            _context = context;\n-        }\n-\n         // ****************************************************\n-        // R - Read: Tüm Öğrencileri Listeleme (IActionResult)\n+        // D - Delete (GET): Silme Onay Sayfasını Göster (IActionResult)\n         // ****************************************************\n-        public async Task<IActionResult> Index()\n+        public async Task<IActionResult> Sil(int? id)\n         {\n-            return View(await _context.Ogrenciler.ToListAsync());\n-        }\n+            if (id == null)\n+            {\n+                return NotFound();\n+            }\n \n-        // ****************************************************\n-        // C - Create (GET): Formu Göster (IActionResult)\n-        // ****************************************************\n-        public IActionResult Ekle()\n-        {\n-            return View(); \n+            // Öğrenciyi bul\n+            var ogrenci = await _context.Ogrenciler.FirstOrDefaultAsync(m => m.Id == id);\n+            \n+            if (ogrenci == null)\n+            {\n+                return NotFound();\n+            }\n+\n+            // Onay sayfasını göster\n+            return View(ogrenci);\n         }\n \n         // ****************************************************\n-        // C - Create (POST): Veriyi Kaydet (IActionResult)\n+        // D - Delete (POST): Silme İşlemini Gerçekleştir (IActionResult)\n         // ****************************************************\n-        [HttpPost]\n+        [HttpPost, ActionName(\"Sil\")] // URL Sil action'ı POST metodu ile çalışacak\n         [ValidateAntiForgeryToken]\n-        public async Task<IActionResult> Ekle([Bind(\"Ad,Soyad,OgrenciNo\")] Ogrenci ogrenci)\n+        public async Task<IActionResult> SilOnay(int id) // Metot adı çakışmasın diye SilOnay kullandık\n         {\n-            if (ModelState.IsValid)\n+            var ogrenci = await _context.Ogrenciler.FindAsync(id);\n+            \n+            if (ogrenci != null)\n             {\n-                _context.Add(ogrenci);\n-                await _context.SaveChangesAsync();\n-                return RedirectToAction(nameof(Index));\n+                _context.Ogrenciler.Remove(ogrenci); // Bağlamdan sil\n+                await _context.SaveChangesAsync(); // Veritabanına uygula\n             }\n-            return View(ogrenci);\n+            \n+            // Silme başarılıysa Listeleme sayfasına yönlendir\n+            return RedirectToAction(nameof(Index));\n         }\n \n-        // Eksik olan U ve D metotları buraya eklenecektir.\n-        \n     }\n }\n\\ No newline at end of file\n"
                }
            ],
            "date": 1762443540537,
            "name": "Commit-0",
            "content": "using Microsoft.AspNetCore.Mvc;\nusing Microsoft.EntityFrameworkCore;\nusing OgrenciYonetimProjesi.Data;\nusing OgrenciYonetimProjesi.Models;\n\nnamespace OgrenciYonetimProjesi.Controllers\n{\n    public class OgrenciController : Controller\n    {\n        private readonly UygulamaDbContext _context;\n\n        public OgrenciController(UygulamaDbContext context)\n        {\n            _context = context;\n        }\n\n        // ****************************************************\n        // R - Read: Tüm Öğrencileri Listeleme (IActionResult)\n        // ****************************************************\n        public async Task<IActionResult> Index()\n        {\n            return View(await _context.Ogrenciler.ToListAsync());\n        }\n\n        // ****************************************************\n        // C - Create (GET): Formu Göster (IActionResult)\n        // ****************************************************\n        public IActionResult Ekle()\n        {\n            return View(); \n        }\n\n        // ****************************************************\n        // C - Create (POST): Veriyi Kaydet (IActionResult)\n        // ****************************************************\n        [HttpPost]\n        [ValidateAntiForgeryToken]\n        public async Task<IActionResult> Ekle([Bind(\"Ad,Soyad,OgrenciNo\")] Ogrenci ogrenci)\n        {\n            if (ModelState.IsValid)\n            {\n                _context.Add(ogrenci);\n                await _context.SaveChangesAsync();\n                return RedirectToAction(nameof(Index));\n            }\n            return View(ogrenci);\n        }\n\n        // Eksik olan U ve D metotları buraya eklenecektir.\n        \n    }\n}"
        }
    ]
}